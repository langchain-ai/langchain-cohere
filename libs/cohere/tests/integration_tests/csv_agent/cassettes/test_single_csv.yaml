interactions:
- request:
    body: ''
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate
      connection:
      - keep-alive
      host:
      - api.cohere.com
      user-agent:
      - python-httpx/0.27.2
      x-client-name:
      - langchain:partner
      x-fern-language:
      - Python
      x-fern-sdk-name:
      - cohere
      x-fern-sdk-version:
      - 5.11.4
    method: GET
    uri: https://api.cohere.com/v1/models?endpoint=chat&default_only=true
  response:
    body:
      string: '{"models":[{"name":"command-r-plus-08-2024","endpoints":["generate","chat","summarize"],"finetuned":false,"context_length":128000,"tokenizer_url":"https://storage.googleapis.com/cohere-public/tokenizers/command-r-plus-08-2024.json","default_endpoints":["chat"]}]}'
    headers:
      Alt-Svc:
      - h3=":443"; ma=2592000,h3-29=":443"; ma=2592000
      Content-Length:
      - '263'
      Via:
      - 1.1 google
      access-control-expose-headers:
      - X-Debug-Trace-ID
      cache-control:
      - no-cache, no-store, no-transform, must-revalidate, private, max-age=0
      content-type:
      - application/json
      date:
      - Thu, 28 Nov 2024 15:59:24 GMT
      expires:
      - Thu, 01 Jan 1970 00:00:00 UTC
      pragma:
      - no-cache
      server:
      - envoy
      vary:
      - Origin
      x-accel-expires:
      - '0'
      x-debug-trace-id:
      - 5cd30bdee2d60d3f7dd9c0848513d661
      x-endpoint-monthly-call-limit:
      - '1000'
      x-envoy-upstream-service-time:
      - '10'
      x-trial-endpoint-call-limit:
      - '40'
      x-trial-endpoint-call-remaining:
      - '39'
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "command-r-plus-08-2024", "messages": [{"role": "system", "content":
      "## Task And Context\nYou use your advanced complex reasoning capabilities to
      help people by answering their questions and other requests interactively. You
      will be asked a very wide array of requests on all kinds of topics. You will
      be equipped with a wide range of search engines or similar tools to help you,
      which you use to research your answer. You may need to use multiple tools in
      parallel or sequentially to complete your task. You should focus on serving
      the user''s needs as best you can, which will be wide-ranging. The current date
      is Thursday, November 28, 2024 15:59:24\n\n## Style Guide\nUnless the user asks
      for a different style of answer, you should answer in full sentences, using
      proper grammar and spelling\n"}, {"role": "user", "content": "The user uploaded
      the following attachments:\nFilename: tests/integration_tests/csv_agent/csv/movie_ratings.csv\nWord
      Count: 21\nPreview: movie,user,rating The Shawshank Redemption,John,8 The Shawshank
      Redemption,Jerry,6 The Shawshank Redemption,Jack,7 The Shawshank Redemption,Jeremy,8"},
      {"role": "user", "content": "Which movie has the highest average rating?"}],
      "tools": [{"type": "function", "function": {"name": "file_read", "description":
      "Returns the textual contents of an uploaded file, broken up in text chunks",
      "parameters": {"type": "object", "properties": {"filename": {"type": "str",
      "description": "The name of the attached file to read."}}, "required": ["filename"]}}},
      {"type": "function", "function": {"name": "file_peek", "description": "The name
      of the attached file to show a peek preview.", "parameters": {"type": "object",
      "properties": {"filename": {"type": "str", "description": "The name of the attached
      file to show a peek preview."}}, "required": ["filename"]}}}, {"type": "function",
      "function": {"name": "python_interpreter", "description": "Executes python code
      and returns the result. The code runs in a static sandbox without interactive
      mode, so print output or save output to a file.", "parameters": {"type": "object",
      "properties": {"code": {"type": "str", "description": "Python code to execute."}},
      "required": ["code"]}}}], "stream": true}'
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate
      connection:
      - keep-alive
      content-length:
      - '2222'
      content-type:
      - application/json
      host:
      - api.cohere.com
      user-agent:
      - python-httpx/0.27.2
      x-client-name:
      - langchain:partner
      x-fern-language:
      - Python
      x-fern-sdk-name:
      - cohere
      x-fern-sdk-version:
      - 5.11.4
    method: POST
    uri: https://api.cohere.com/v2/chat
  response:
    body:
      string: 'event: message-start

        data: {"id":"931c65aa-5138-43b5-88e4-9e7949c18b12","type":"message-start","delta":{"message":{"role":"assistant","content":[],"tool_plan":"","tool_calls":[],"citations":[]}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"I"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" will"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" first"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" preview"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" the"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" file"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" to"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" understand"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" its"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" structure"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"."}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" Then"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":","}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" I"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" will"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" write"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" and"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" execute"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" Python"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" code"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" to"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" find"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" the"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" movie"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" with"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" the"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" highest"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" average"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" rating"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"."}}}


        event: tool-call-start

        data: {"type":"tool-call-start","index":0,"delta":{"message":{"tool_calls":{"id":"file_peek_m3y7ypwtfpqq","type":"function","function":{"name":"file_peek","arguments":""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"{\n    \""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"filename"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\":"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        \""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"tests"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"integration"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"tests"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"agent"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"ratings"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"."}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"}"}}}}}


        event: tool-call-end

        data: {"type":"tool-call-end","index":0}


        event: message-end

        data: {"type":"message-end","delta":{"finish_reason":"TOOL_CALL","usage":{"billed_units":{"input_tokens":338,"output_tokens":54},"tokens":{"input_tokens":1143,"output_tokens":88}}}}


        data: [DONE]


        '
    headers:
      Alt-Svc:
      - h3=":443"; ma=2592000,h3-29=":443"; ma=2592000
      Transfer-Encoding:
      - chunked
      Via:
      - 1.1 google
      access-control-expose-headers:
      - X-Debug-Trace-ID
      cache-control:
      - no-cache, no-store, no-transform, must-revalidate, private, max-age=0
      content-type:
      - text/event-stream
      date:
      - Thu, 28 Nov 2024 15:59:24 GMT
      expires:
      - Thu, 01 Jan 1970 00:00:00 UTC
      pragma:
      - no-cache
      server:
      - envoy
      vary:
      - Origin
      x-accel-expires:
      - '0'
      x-debug-trace-id:
      - 1d63c66ed7774a79c4220c4cd5d768c7
      x-endpoint-monthly-call-limit:
      - '1000'
      x-envoy-upstream-service-time:
      - '21'
      x-trial-endpoint-call-limit:
      - '40'
      x-trial-endpoint-call-remaining:
      - '38'
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "command-r-plus-08-2024", "messages": [{"role": "system", "content":
      "## Task And Context\nYou use your advanced complex reasoning capabilities to
      help people by answering their questions and other requests interactively. You
      will be asked a very wide array of requests on all kinds of topics. You will
      be equipped with a wide range of search engines or similar tools to help you,
      which you use to research your answer. You may need to use multiple tools in
      parallel or sequentially to complete your task. You should focus on serving
      the user''s needs as best you can, which will be wide-ranging. The current date
      is Thursday, November 28, 2024 15:59:24\n\n## Style Guide\nUnless the user asks
      for a different style of answer, you should answer in full sentences, using
      proper grammar and spelling\n"}, {"role": "user", "content": "The user uploaded
      the following attachments:\nFilename: tests/integration_tests/csv_agent/csv/movie_ratings.csv\nWord
      Count: 21\nPreview: movie,user,rating The Shawshank Redemption,John,8 The Shawshank
      Redemption,Jerry,6 The Shawshank Redemption,Jack,7 The Shawshank Redemption,Jeremy,8"},
      {"role": "user", "content": "Which movie has the highest average rating?"},
      {"role": "assistant", "tool_calls": [{"id": "file_peek_m3y7ypwtfpqq", "type":
      "function", "function": {"name": "file_peek", "arguments": "{\"filename\": \"tests/integration_tests/csv_agent/csv/movie_ratings.csv\"}"}}],
      "tool_plan": "I will first preview the file to understand its structure. Then,
      I will write and execute Python code to find the movie with the highest average
      rating."}, {"role": "tool", "tool_call_id": "file_peek_m3y7ypwtfpqq", "content":
      [{"type": "document", "document": {"data": {"output": "|    | movie                    |
      user   |   rating |\n|---:|:-------------------------|:-------|---------:|\n|  0
      | The Shawshank Redemption | John   |        8 |\n|  1 | The Shawshank Redemption
      | Jerry  |        6 |\n|  2 | The Shawshank Redemption | Jack   |        7 |\n|  3
      | The Shawshank Redemption | Jeremy |        8 |\n|  4 | Finding Nemo             |
      Darren |        9 |"}}}]}], "tools": [{"type": "function", "function": {"name":
      "file_read", "description": "Returns the textual contents of an uploaded file,
      broken up in text chunks", "parameters": {"type": "object", "properties": {"filename":
      {"type": "str", "description": "The name of the attached file to read."}}, "required":
      ["filename"]}}}, {"type": "function", "function": {"name": "file_peek", "description":
      "The name of the attached file to show a peek preview.", "parameters": {"type":
      "object", "properties": {"filename": {"type": "str", "description": "The name
      of the attached file to show a peek preview."}}, "required": ["filename"]}}},
      {"type": "function", "function": {"name": "python_interpreter", "description":
      "Executes python code and returns the result. The code runs in a static sandbox
      without interactive mode, so print output or save output to a file.", "parameters":
      {"type": "object", "properties": {"code": {"type": "str", "description": "Python
      code to execute."}}, "required": ["code"]}}}], "stream": true}'
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate
      connection:
      - keep-alive
      content-length:
      - '3127'
      content-type:
      - application/json
      host:
      - api.cohere.com
      user-agent:
      - python-httpx/0.27.2
      x-client-name:
      - langchain:partner
      x-fern-language:
      - Python
      x-fern-sdk-name:
      - cohere
      x-fern-sdk-version:
      - 5.11.4
    method: POST
    uri: https://api.cohere.com/v2/chat
  response:
    body:
      string: 'event: message-start

        data: {"id":"25e47b2c-b022-4814-a897-6689565c7260","type":"message-start","delta":{"message":{"role":"assistant","content":[],"tool_plan":"","tool_calls":[],"citations":[]}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"The"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" file"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" contains"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" three"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" columns"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":":"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" ''"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"movie"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"'',"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" ''"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"user"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"'',"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" and"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" ''"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"rating"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"''."}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" I"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" will"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" now"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" write"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" and"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" execute"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" Python"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" code"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" to"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" find"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" the"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" movie"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" with"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" the"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" highest"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" average"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" rating"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"."}}}


        event: tool-call-start

        data: {"type":"tool-call-start","index":0,"delta":{"message":{"tool_calls":{"id":"python_interpreter_wdb4esfs03bp","type":"function","function":{"name":"python_interpreter","arguments":""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"{\n    \""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"code"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\":"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        \""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"import"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        pandas"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        as"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        pd"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\r"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\r"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\nd"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"f"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        ="}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        pd"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"."}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"read"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"(\\\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"tests"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"integration"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"tests"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"agent"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"ratings"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"."}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\\")"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\r"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\r"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"#"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        Calculate"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        the"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        average"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        rating"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        for"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        each"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\r"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\nav"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"er"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"age"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"ratings"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        ="}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        df"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"."}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"groupby"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"(\\\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\\")["}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"rating"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"]."}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"mean"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"()"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\r"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\r"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"#"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        Find"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        the"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        with"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        the"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        highest"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        average"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        rating"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\r"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"max"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"average"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"rating"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        ="}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        average"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"ratings"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"."}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"idx"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"max"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"()"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\r"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\r"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"print"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"("}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"f"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"Movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        with"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        the"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        highest"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        average"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        rating"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":":"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        {"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"max"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"average"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"rating"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"}\\\")"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"}"}}}}}


        event: tool-call-end

        data: {"type":"tool-call-end","index":0}


        event: message-end

        data: {"type":"message-end","delta":{"finish_reason":"TOOL_CALL","usage":{"billed_units":{"input_tokens":477,"output_tokens":182},"tokens":{"input_tokens":1359,"output_tokens":216}}}}


        data: [DONE]


        '
    headers:
      Alt-Svc:
      - h3=":443"; ma=2592000,h3-29=":443"; ma=2592000
      Transfer-Encoding:
      - chunked
      Via:
      - 1.1 google
      access-control-expose-headers:
      - X-Debug-Trace-ID
      cache-control:
      - no-cache, no-store, no-transform, must-revalidate, private, max-age=0
      content-type:
      - text/event-stream
      date:
      - Thu, 28 Nov 2024 15:59:26 GMT
      expires:
      - Thu, 01 Jan 1970 00:00:00 UTC
      pragma:
      - no-cache
      server:
      - envoy
      vary:
      - Origin
      x-accel-expires:
      - '0'
      x-debug-trace-id:
      - 72220d91f190da0cb3a76f315a3ffb09
      x-endpoint-monthly-call-limit:
      - '1000'
      x-envoy-upstream-service-time:
      - '16'
      x-trial-endpoint-call-limit:
      - '40'
      x-trial-endpoint-call-remaining:
      - '37'
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "command-r-plus-08-2024", "messages": [{"role": "system", "content":
      "## Task And Context\nYou use your advanced complex reasoning capabilities to
      help people by answering their questions and other requests interactively. You
      will be asked a very wide array of requests on all kinds of topics. You will
      be equipped with a wide range of search engines or similar tools to help you,
      which you use to research your answer. You may need to use multiple tools in
      parallel or sequentially to complete your task. You should focus on serving
      the user''s needs as best you can, which will be wide-ranging. The current date
      is Thursday, November 28, 2024 15:59:24\n\n## Style Guide\nUnless the user asks
      for a different style of answer, you should answer in full sentences, using
      proper grammar and spelling\n"}, {"role": "user", "content": "The user uploaded
      the following attachments:\nFilename: tests/integration_tests/csv_agent/csv/movie_ratings.csv\nWord
      Count: 21\nPreview: movie,user,rating The Shawshank Redemption,John,8 The Shawshank
      Redemption,Jerry,6 The Shawshank Redemption,Jack,7 The Shawshank Redemption,Jeremy,8"},
      {"role": "user", "content": "Which movie has the highest average rating?"},
      {"role": "assistant", "tool_calls": [{"id": "file_peek_m3y7ypwtfpqq", "type":
      "function", "function": {"name": "file_peek", "arguments": "{\"filename\": \"tests/integration_tests/csv_agent/csv/movie_ratings.csv\"}"}}],
      "tool_plan": "I will first preview the file to understand its structure. Then,
      I will write and execute Python code to find the movie with the highest average
      rating."}, {"role": "tool", "tool_call_id": "file_peek_m3y7ypwtfpqq", "content":
      [{"type": "document", "document": {"data": {"output": "|    | movie                    |
      user   |   rating |\n|---:|:-------------------------|:-------|---------:|\n|  0
      | The Shawshank Redemption | John   |        8 |\n|  1 | The Shawshank Redemption
      | Jerry  |        6 |\n|  2 | The Shawshank Redemption | Jack   |        7 |\n|  3
      | The Shawshank Redemption | Jeremy |        8 |\n|  4 | Finding Nemo             |
      Darren |        9 |"}}}]}, {"role": "assistant", "tool_calls": [{"id": "python_interpreter_wdb4esfs03bp",
      "type": "function", "function": {"name": "python_interpreter", "arguments":
      "{\"code\": \"import pandas as pd\\r\\n\\r\\ndf = pd.read_csv(\\\"tests/integration_tests/csv_agent/csv/movie_ratings.csv\\\")\\r\\n\\r\\n#
      Calculate the average rating for each movie\\r\\naverage_ratings = df.groupby(\\\"movie\\\")[\\\"rating\\\"].mean()\\r\\n\\r\\n#
      Find the movie with the highest average rating\\r\\nmax_average_rating_movie
      = average_ratings.idxmax()\\r\\n\\r\\nprint(f\\\"Movie with the highest average
      rating: {max_average_rating_movie}\\\")\"}"}}], "tool_plan": "The file contains
      three columns: ''movie'', ''user'', and ''rating''. I will now write and execute
      Python code to find the movie with the highest average rating."}, {"role": "tool",
      "tool_call_id": "python_interpreter_wdb4esfs03bp", "content": [{"type": "document",
      "document": {"data": {"output": "Movie with the highest average rating: The
      Shawshank Redemption\n"}}}]}], "tools": [{"type": "function", "function": {"name":
      "file_read", "description": "Returns the textual contents of an uploaded file,
      broken up in text chunks", "parameters": {"type": "object", "properties": {"filename":
      {"type": "str", "description": "The name of the attached file to read."}}, "required":
      ["filename"]}}}, {"type": "function", "function": {"name": "file_peek", "description":
      "The name of the attached file to show a peek preview.", "parameters": {"type":
      "object", "properties": {"filename": {"type": "str", "description": "The name
      of the attached file to show a peek preview."}}, "required": ["filename"]}}},
      {"type": "function", "function": {"name": "python_interpreter", "description":
      "Executes python code and returns the result. The code runs in a static sandbox
      without interactive mode, so print output or save output to a file.", "parameters":
      {"type": "object", "properties": {"code": {"type": "str", "description": "Python
      code to execute."}}, "required": ["code"]}}}], "stream": true}'
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate
      connection:
      - keep-alive
      content-length:
      - '4136'
      content-type:
      - application/json
      host:
      - api.cohere.com
      user-agent:
      - python-httpx/0.27.2
      x-client-name:
      - langchain:partner
      x-fern-language:
      - Python
      x-fern-sdk-name:
      - cohere
      x-fern-sdk-version:
      - 5.11.4
    method: POST
    uri: https://api.cohere.com/v2/chat
  response:
    body:
      string: 'event: message-start

        data: {"id":"bd00c10a-0ed4-4793-98eb-ec6694c07825","type":"message-start","delta":{"message":{"role":"assistant","content":[],"tool_plan":"","tool_calls":[],"citations":[]}}}


        event: content-start

        data: {"type":"content-start","index":0,"delta":{"message":{"content":{"type":"text","text":""}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"The"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        movie"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        with"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        the"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        highest"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        average"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        rating"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        is"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        *"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"The"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        Shaw"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"shank"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        Redemption"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"*."}}}}


        event: citation-start

        data: {"type":"citation-start","index":0,"delta":{"message":{"citations":{"start":46,"end":70,"text":"The
        Shawshank Redemption","sources":[{"type":"tool","id":"python_interpreter_wdb4esfs03bp:0","tool_output":{"output":"Movie
        with the highest average rating: The Shawshank Redemption\n"}}]}}}}


        event: citation-end

        data: {"type":"citation-end","index":0}


        event: content-end

        data: {"type":"content-end","index":0}


        event: message-end

        data: {"type":"message-end","delta":{"finish_reason":"COMPLETE","usage":{"billed_units":{"input_tokens":534,"output_tokens":14},"tokens":{"input_tokens":1616,"output_tokens":62}}}}


        data: [DONE]


        '
    headers:
      Alt-Svc:
      - h3=":443"; ma=2592000,h3-29=":443"; ma=2592000
      Transfer-Encoding:
      - chunked
      Via:
      - 1.1 google
      access-control-expose-headers:
      - X-Debug-Trace-ID
      cache-control:
      - no-cache, no-store, no-transform, must-revalidate, private, max-age=0
      content-type:
      - text/event-stream
      date:
      - Thu, 28 Nov 2024 15:59:31 GMT
      expires:
      - Thu, 01 Jan 1970 00:00:00 UTC
      pragma:
      - no-cache
      server:
      - envoy
      vary:
      - Origin
      x-accel-expires:
      - '0'
      x-debug-trace-id:
      - 929790b745547c3dd18a67c4f845632f
      x-endpoint-monthly-call-limit:
      - '1000'
      x-envoy-upstream-service-time:
      - '21'
      x-trial-endpoint-call-limit:
      - '40'
      x-trial-endpoint-call-remaining:
      - '36'
    status:
      code: 200
      message: OK
version: 1

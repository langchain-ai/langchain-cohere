interactions:
- request:
    body: ''
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate
      connection:
      - keep-alive
      host:
      - api.cohere.com
      user-agent:
      - python-httpx/0.27.2
      x-client-name:
      - langchain:partner
      x-fern-language:
      - Python
      x-fern-sdk-name:
      - cohere
      x-fern-sdk-version:
      - 5.11.4
    method: GET
    uri: https://api.cohere.com/v1/models?endpoint=chat&default_only=true
  response:
    body:
      string: '{"models":[{"name":"command-r-plus-08-2024","endpoints":["generate","chat","summarize"],"finetuned":false,"context_length":128000,"tokenizer_url":"https://storage.googleapis.com/cohere-public/tokenizers/command-r-plus-08-2024.json","default_endpoints":["chat"]}]}'
    headers:
      Alt-Svc:
      - h3=":443"; ma=2592000,h3-29=":443"; ma=2592000
      Content-Length:
      - '263'
      Via:
      - 1.1 google
      access-control-expose-headers:
      - X-Debug-Trace-ID
      cache-control:
      - no-cache, no-store, no-transform, must-revalidate, private, max-age=0
      content-type:
      - application/json
      date:
      - Thu, 28 Nov 2024 16:29:31 GMT
      expires:
      - Thu, 01 Jan 1970 00:00:00 UTC
      pragma:
      - no-cache
      server:
      - envoy
      vary:
      - Origin
      x-accel-expires:
      - '0'
      x-debug-trace-id:
      - 20a9cfce6cd7fe043e6ad39f39756a4b
      x-endpoint-monthly-call-limit:
      - '1000'
      x-envoy-upstream-service-time:
      - '16'
      x-trial-endpoint-call-limit:
      - '40'
      x-trial-endpoint-call-remaining:
      - '39'
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "command-r-plus-08-2024", "messages": [{"role": "system", "content":
      "## Task And Context\nYou use your advanced complex reasoning capabilities to
      help people by answering their questions and other requests interactively. You
      will be asked a very wide array of requests on all kinds of topics. You will
      be equipped with a wide range of search engines or similar tools to help you,
      which you use to research your answer. You may need to use multiple tools in
      parallel or sequentially to complete your task. You should focus on serving
      the user''s needs as best you can, which will be wide-ranging. The current date
      is Thursday, November 28, 2024 16:29:31\n\n## Style Guide\nUnless the user asks
      for a different style of answer, you should answer in full sentences, using
      proper grammar and spelling\n"}, {"role": "user", "content": "The user uploaded
      the following attachments:\nFilename: tests/integration_tests/csv_agent/csv/movie_ratings.csv\nWord
      Count: 21\nPreview: movie,user,rating The Shawshank Redemption,John,8 The Shawshank
      Redemption,Jerry,6 The Shawshank Redemption,Jack,7 The Shawshank Redemption,Jeremy,8
      The user uploaded the following attachments:\nFilename: tests/integration_tests/csv_agent/csv/movie_bookings.csv\nWord
      Count: 21\nPreview: movie,name,num_tickets The Shawshank Redemption,John,2 The
      Shawshank Redemption,Jerry,2 The Shawshank Redemption,Jack,4 The Shawshank Redemption,Jeremy,2"},
      {"role": "user", "content": "Which movie has the highest average rating?"}],
      "tools": [{"type": "function", "function": {"name": "file_read", "description":
      "Returns the textual contents of an uploaded file, broken up in text chunks",
      "parameters": {"type": "object", "properties": {"filename": {"type": "str",
      "description": "The name of the attached file to read."}}, "required": ["filename"]}}},
      {"type": "function", "function": {"name": "file_peek", "description": "The name
      of the attached file to show a peek preview.", "parameters": {"type": "object",
      "properties": {"filename": {"type": "str", "description": "The name of the attached
      file to show a peek preview."}}, "required": ["filename"]}}}, {"type": "function",
      "function": {"name": "python_interpreter", "description": "Executes python code
      and returns the result. The code runs in a static sandbox without interactive
      mode, so print output or save output to a file.", "parameters": {"type": "object",
      "properties": {"code": {"type": "str", "description": "Python code to execute."}},
      "required": ["code"]}}}], "stream": true}'
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate
      connection:
      - keep-alive
      content-length:
      - '2515'
      content-type:
      - application/json
      host:
      - api.cohere.com
      user-agent:
      - python-httpx/0.27.2
      x-client-name:
      - langchain:partner
      x-fern-language:
      - Python
      x-fern-sdk-name:
      - cohere
      x-fern-sdk-version:
      - 5.11.4
    method: POST
    uri: https://api.cohere.com/v2/chat
  response:
    body:
      string: 'event: message-start

        data: {"id":"a786b7b5-af2f-48ff-82e8-5fb5227b123f","type":"message-start","delta":{"message":{"role":"assistant","content":[],"tool_plan":"","tool_calls":[],"citations":[]}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"I"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" will"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" inspect"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" the"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" files"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" to"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" understand"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" their"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" structure"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" and"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" content"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"."}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" Then"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":","}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" I"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" will"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" write"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" and"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" execute"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" Python"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" code"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" to"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" find"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" the"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" movie"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" with"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" the"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" highest"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" average"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" rating"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"."}}}


        event: tool-call-start

        data: {"type":"tool-call-start","index":0,"delta":{"message":{"tool_calls":{"id":"file_peek_1d17s078evcv","type":"function","function":{"name":"file_peek","arguments":""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"{\n    \""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"filename"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\":"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        \""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"tests"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"integration"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"tests"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"agent"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"ratings"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"."}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"}"}}}}}


        event: tool-call-end

        data: {"type":"tool-call-end","index":0}


        event: tool-call-start

        data: {"type":"tool-call-start","index":1,"delta":{"message":{"tool_calls":{"id":"file_peek_gvf5612zp1n1","type":"function","function":{"name":"file_peek","arguments":""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"{\n    \""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"filename"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"\":"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        \""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"tests"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"integration"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"tests"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"agent"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"book"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"ings"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"."}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"}"}}}}}


        event: tool-call-end

        data: {"type":"tool-call-end","index":1}


        event: message-end

        data: {"type":"message-end","delta":{"finish_reason":"TOOL_CALL","usage":{"billed_units":{"input_tokens":415,"output_tokens":80},"tokens":{"input_tokens":1220,"output_tokens":135}}}}


        data: [DONE]


        '
    headers:
      Alt-Svc:
      - h3=":443"; ma=2592000,h3-29=":443"; ma=2592000
      Transfer-Encoding:
      - chunked
      Via:
      - 1.1 google
      access-control-expose-headers:
      - X-Debug-Trace-ID
      cache-control:
      - no-cache, no-store, no-transform, must-revalidate, private, max-age=0
      content-type:
      - text/event-stream
      date:
      - Thu, 28 Nov 2024 16:29:31 GMT
      expires:
      - Thu, 01 Jan 1970 00:00:00 UTC
      pragma:
      - no-cache
      server:
      - envoy
      vary:
      - Origin
      x-accel-expires:
      - '0'
      x-debug-trace-id:
      - 278bd304180ee96f947fd8eca971483a
      x-endpoint-monthly-call-limit:
      - '1000'
      x-envoy-upstream-service-time:
      - '32'
      x-trial-endpoint-call-limit:
      - '40'
      x-trial-endpoint-call-remaining:
      - '39'
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "command-r-plus-08-2024", "messages": [{"role": "system", "content":
      "## Task And Context\nYou use your advanced complex reasoning capabilities to
      help people by answering their questions and other requests interactively. You
      will be asked a very wide array of requests on all kinds of topics. You will
      be equipped with a wide range of search engines or similar tools to help you,
      which you use to research your answer. You may need to use multiple tools in
      parallel or sequentially to complete your task. You should focus on serving
      the user''s needs as best you can, which will be wide-ranging. The current date
      is Thursday, November 28, 2024 16:29:31\n\n## Style Guide\nUnless the user asks
      for a different style of answer, you should answer in full sentences, using
      proper grammar and spelling\n"}, {"role": "user", "content": "The user uploaded
      the following attachments:\nFilename: tests/integration_tests/csv_agent/csv/movie_ratings.csv\nWord
      Count: 21\nPreview: movie,user,rating The Shawshank Redemption,John,8 The Shawshank
      Redemption,Jerry,6 The Shawshank Redemption,Jack,7 The Shawshank Redemption,Jeremy,8
      The user uploaded the following attachments:\nFilename: tests/integration_tests/csv_agent/csv/movie_bookings.csv\nWord
      Count: 21\nPreview: movie,name,num_tickets The Shawshank Redemption,John,2 The
      Shawshank Redemption,Jerry,2 The Shawshank Redemption,Jack,4 The Shawshank Redemption,Jeremy,2"},
      {"role": "user", "content": "Which movie has the highest average rating?"},
      {"role": "assistant", "tool_calls": [{"id": "file_peek_1d17s078evcv", "type":
      "function", "function": {"name": "file_peek", "arguments": "{\"filename\": \"tests/integration_tests/csv_agent/csv/movie_ratings.csv\"}"}},
      {"id": "file_peek_gvf5612zp1n1", "type": "function", "function": {"name": "file_peek",
      "arguments": "{\"filename\": \"tests/integration_tests/csv_agent/csv/movie_bookings.csv\"}"}}],
      "tool_plan": "I will inspect the files to understand their structure and content.
      Then, I will write and execute Python code to find the movie with the highest
      average rating."}, {"role": "tool", "tool_call_id": "file_peek_1d17s078evcv",
      "content": [{"type": "document", "document": {"data": {"output": "|    | movie                    |
      user   |   rating |\n|---:|:-------------------------|:-------|---------:|\n|  0
      | The Shawshank Redemption | John   |        8 |\n|  1 | The Shawshank Redemption
      | Jerry  |        6 |\n|  2 | The Shawshank Redemption | Jack   |        7 |\n|  3
      | The Shawshank Redemption | Jeremy |        8 |\n|  4 | Finding Nemo             |
      Darren |        9 |"}}}]}, {"role": "tool", "tool_call_id": "file_peek_gvf5612zp1n1",
      "content": [{"type": "document", "document": {"data": {"output": "|    | movie                    |
      name   |   num_tickets |\n|---:|:-------------------------|:-------|--------------:|\n|  0
      | The Shawshank Redemption | John   |             2 |\n|  1 | The Shawshank
      Redemption | Jerry  |             2 |\n|  2 | The Shawshank Redemption | Jack   |             4
      |\n|  3 | The Shawshank Redemption | Jeremy |             2 |\n|  4 | Finding
      Nemo             | Darren |             3 |"}}}]}], "tools": [{"type": "function",
      "function": {"name": "file_read", "description": "Returns the textual contents
      of an uploaded file, broken up in text chunks", "parameters": {"type": "object",
      "properties": {"filename": {"type": "str", "description": "The name of the attached
      file to read."}}, "required": ["filename"]}}}, {"type": "function", "function":
      {"name": "file_peek", "description": "The name of the attached file to show
      a peek preview.", "parameters": {"type": "object", "properties": {"filename":
      {"type": "str", "description": "The name of the attached file to show a peek
      preview."}}, "required": ["filename"]}}}, {"type": "function", "function": {"name":
      "python_interpreter", "description": "Executes python code and returns the result.
      The code runs in a static sandbox without interactive mode, so print output
      or save output to a file.", "parameters": {"type": "object", "properties": {"code":
      {"type": "str", "description": "Python code to execute."}}, "required": ["code"]}}}],
      "stream": true}'
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate
      connection:
      - keep-alive
      content-length:
      - '4162'
      content-type:
      - application/json
      host:
      - api.cohere.com
      user-agent:
      - python-httpx/0.27.2
      x-client-name:
      - langchain:partner
      x-fern-language:
      - Python
      x-fern-sdk-name:
      - cohere
      x-fern-sdk-version:
      - 5.11.4
    method: POST
    uri: https://api.cohere.com/v2/chat
  response:
    body:
      string: 'event: message-start

        data: {"id":"fef73d9c-20e3-4000-8816-dacec46b2613","type":"message-start","delta":{"message":{"role":"assistant","content":[],"tool_plan":"","tool_calls":[],"citations":[]}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"The"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" first"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" file"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":","}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" movie"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"_"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"ratings"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"."}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"csv"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":","}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" contains"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" the"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" columns"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" movie"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":","}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" user"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":","}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" and"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" rating"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"."}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" The"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" second"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" file"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":","}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" movie"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"_"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"book"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"ings"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"."}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"csv"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":","}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" contains"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" the"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" columns"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" movie"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":","}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" name"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":","}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" and"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" num"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"_"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"tickets"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"."}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" I"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" will"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" now"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" write"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" and"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" execute"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" Python"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" code"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" to"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" find"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" the"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" movie"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" with"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" the"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" highest"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" average"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" rating"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"."}}}


        event: tool-call-start

        data: {"type":"tool-call-start","index":0,"delta":{"message":{"tool_calls":{"id":"python_interpreter_6687yej4d6e7","type":"function","function":{"name":"python_interpreter","arguments":""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"{\n    \""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"code"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\":"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        \""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"import"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        pandas"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        as"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        pd"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"#"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        Read"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        the"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        CSV"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        files"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"ratings"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        ="}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        pd"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"."}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"read"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"(\\\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"tests"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"integration"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"tests"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"agent"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"ratings"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"."}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\\")"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"book"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"ings"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        ="}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        pd"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"."}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"read"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"(\\\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"tests"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"integration"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"tests"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"agent"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"book"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"ings"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"."}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\\")"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"#"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        Group"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        ratings"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        by"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        and"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        calculate"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        average"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        rating"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"ratings"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"grouped"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        ="}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"ratings"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"."}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"groupby"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"(\\\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\\")["}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"rating"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"]."}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"mean"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"()"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"#"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        Find"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        the"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        with"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        the"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        highest"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        average"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        rating"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\nh"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"igh"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"est"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"rated"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        ="}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"ratings"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"grouped"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"."}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"idx"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"max"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"()"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"print"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"("}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"f"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"Highest"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        rated"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":":"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        {"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"highest"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"rated"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"}\\\")"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"}"}}}}}


        event: tool-call-end

        data: {"type":"tool-call-end","index":0}


        event: message-end

        data: {"type":"message-end","delta":{"finish_reason":"TOOL_CALL","usage":{"billed_units":{"input_tokens":666,"output_tokens":230},"tokens":{"input_tokens":1601,"output_tokens":264}}}}


        data: [DONE]


        '
    headers:
      Alt-Svc:
      - h3=":443"; ma=2592000,h3-29=":443"; ma=2592000
      Transfer-Encoding:
      - chunked
      Via:
      - 1.1 google
      access-control-expose-headers:
      - X-Debug-Trace-ID
      cache-control:
      - no-cache, no-store, no-transform, must-revalidate, private, max-age=0
      content-type:
      - text/event-stream
      date:
      - Thu, 28 Nov 2024 16:29:34 GMT
      expires:
      - Thu, 01 Jan 1970 00:00:00 UTC
      pragma:
      - no-cache
      server:
      - envoy
      vary:
      - Origin
      x-accel-expires:
      - '0'
      x-debug-trace-id:
      - fa7bae0dd999b2fa1edfe9aec09aa5c5
      x-endpoint-monthly-call-limit:
      - '1000'
      x-envoy-upstream-service-time:
      - '23'
      x-trial-endpoint-call-limit:
      - '40'
      x-trial-endpoint-call-remaining:
      - '38'
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "command-r-plus-08-2024", "messages": [{"role": "system", "content":
      "## Task And Context\nYou use your advanced complex reasoning capabilities to
      help people by answering their questions and other requests interactively. You
      will be asked a very wide array of requests on all kinds of topics. You will
      be equipped with a wide range of search engines or similar tools to help you,
      which you use to research your answer. You may need to use multiple tools in
      parallel or sequentially to complete your task. You should focus on serving
      the user''s needs as best you can, which will be wide-ranging. The current date
      is Thursday, November 28, 2024 16:29:31\n\n## Style Guide\nUnless the user asks
      for a different style of answer, you should answer in full sentences, using
      proper grammar and spelling\n"}, {"role": "user", "content": "The user uploaded
      the following attachments:\nFilename: tests/integration_tests/csv_agent/csv/movie_ratings.csv\nWord
      Count: 21\nPreview: movie,user,rating The Shawshank Redemption,John,8 The Shawshank
      Redemption,Jerry,6 The Shawshank Redemption,Jack,7 The Shawshank Redemption,Jeremy,8
      The user uploaded the following attachments:\nFilename: tests/integration_tests/csv_agent/csv/movie_bookings.csv\nWord
      Count: 21\nPreview: movie,name,num_tickets The Shawshank Redemption,John,2 The
      Shawshank Redemption,Jerry,2 The Shawshank Redemption,Jack,4 The Shawshank Redemption,Jeremy,2"},
      {"role": "user", "content": "Which movie has the highest average rating?"},
      {"role": "assistant", "tool_calls": [{"id": "file_peek_1d17s078evcv", "type":
      "function", "function": {"name": "file_peek", "arguments": "{\"filename\": \"tests/integration_tests/csv_agent/csv/movie_ratings.csv\"}"}},
      {"id": "file_peek_gvf5612zp1n1", "type": "function", "function": {"name": "file_peek",
      "arguments": "{\"filename\": \"tests/integration_tests/csv_agent/csv/movie_bookings.csv\"}"}}],
      "tool_plan": "I will inspect the files to understand their structure and content.
      Then, I will write and execute Python code to find the movie with the highest
      average rating."}, {"role": "tool", "tool_call_id": "file_peek_1d17s078evcv",
      "content": [{"type": "document", "document": {"data": {"output": "|    | movie                    |
      user   |   rating |\n|---:|:-------------------------|:-------|---------:|\n|  0
      | The Shawshank Redemption | John   |        8 |\n|  1 | The Shawshank Redemption
      | Jerry  |        6 |\n|  2 | The Shawshank Redemption | Jack   |        7 |\n|  3
      | The Shawshank Redemption | Jeremy |        8 |\n|  4 | Finding Nemo             |
      Darren |        9 |"}}}]}, {"role": "tool", "tool_call_id": "file_peek_gvf5612zp1n1",
      "content": [{"type": "document", "document": {"data": {"output": "|    | movie                    |
      name   |   num_tickets |\n|---:|:-------------------------|:-------|--------------:|\n|  0
      | The Shawshank Redemption | John   |             2 |\n|  1 | The Shawshank
      Redemption | Jerry  |             2 |\n|  2 | The Shawshank Redemption | Jack   |             4
      |\n|  3 | The Shawshank Redemption | Jeremy |             2 |\n|  4 | Finding
      Nemo             | Darren |             3 |"}}}]}, {"role": "assistant", "tool_calls":
      [{"id": "python_interpreter_6687yej4d6e7", "type": "function", "function": {"name":
      "python_interpreter", "arguments": "{\"code\": \"import pandas as pd\\n\\n#
      Read the CSV files\\nmovie_ratings = pd.read_csv(\\\"tests/integration_tests/csv_agent/csv/movie_ratings.csv\\\")\\nmovie_bookings
      = pd.read_csv(\\\"tests/integration_tests/csv_agent/csv/movie_bookings.csv\\\")\\n\\n#
      Group ratings by movie and calculate average rating\\nmovie_ratings_grouped
      = movie_ratings.groupby(\\\"movie\\\")[\\\"rating\\\"].mean()\\n\\n# Find the
      movie with the highest average rating\\nhighest_rated_movie = movie_ratings_grouped.idxmax()\\n\\nprint(f\\\"Highest
      rated movie: {highest_rated_movie}\\\")\"}"}}], "tool_plan": "The first file,
      movie_ratings.csv, contains the columns movie, user, and rating. The second
      file, movie_bookings.csv, contains the columns movie, name, and num_tickets.
      I will now write and execute Python code to find the movie with the highest
      average rating."}, {"role": "tool", "tool_call_id": "python_interpreter_6687yej4d6e7",
      "content": [{"type": "document", "document": {"data": {"output": "Highest rated
      movie: The Shawshank Redemption\n"}}}]}], "tools": [{"type": "function", "function":
      {"name": "file_read", "description": "Returns the textual contents of an uploaded
      file, broken up in text chunks", "parameters": {"type": "object", "properties":
      {"filename": {"type": "str", "description": "The name of the attached file to
      read."}}, "required": ["filename"]}}}, {"type": "function", "function": {"name":
      "file_peek", "description": "The name of the attached file to show a peek preview.",
      "parameters": {"type": "object", "properties": {"filename": {"type": "str",
      "description": "The name of the attached file to show a peek preview."}}, "required":
      ["filename"]}}}, {"type": "function", "function": {"name": "python_interpreter",
      "description": "Executes python code and returns the result. The code runs in
      a static sandbox without interactive mode, so print output or save output to
      a file.", "parameters": {"type": "object", "properties": {"code": {"type": "str",
      "description": "Python code to execute."}}, "required": ["code"]}}}], "stream":
      true}'
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate
      connection:
      - keep-alive
      content-length:
      - '5362'
      content-type:
      - application/json
      host:
      - api.cohere.com
      user-agent:
      - python-httpx/0.27.2
      x-client-name:
      - langchain:partner
      x-fern-language:
      - Python
      x-fern-sdk-name:
      - cohere
      x-fern-sdk-version:
      - 5.11.4
    method: POST
    uri: https://api.cohere.com/v2/chat
  response:
    body:
      string: 'event: message-start

        data: {"id":"98942c2e-f1a3-43f0-8e81-bee66d0fc5e7","type":"message-start","delta":{"message":{"role":"assistant","content":[],"tool_plan":"","tool_calls":[],"citations":[]}}}


        event: content-start

        data: {"type":"content-start","index":0,"delta":{"message":{"content":{"type":"text","text":""}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"The"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        movie"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        with"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        the"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        highest"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        average"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        rating"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        is"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        The"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        Shaw"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"shank"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        Redemption"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"."}}}}


        event: citation-start

        data: {"type":"citation-start","index":0,"delta":{"message":{"citations":{"start":45,"end":70,"text":"The
        Shawshank Redemption.","sources":[{"type":"tool","id":"python_interpreter_6687yej4d6e7:0","tool_output":{"output":"Highest
        rated movie: The Shawshank Redemption\n"}}]}}}}


        event: citation-end

        data: {"type":"citation-end","index":0}


        event: content-end

        data: {"type":"content-end","index":0}


        event: message-end

        data: {"type":"message-end","delta":{"finish_reason":"COMPLETE","usage":{"billed_units":{"input_tokens":747,"output_tokens":13},"tokens":{"input_tokens":1903,"output_tokens":62}}}}


        data: [DONE]


        '
    headers:
      Alt-Svc:
      - h3=":443"; ma=2592000,h3-29=":443"; ma=2592000
      Transfer-Encoding:
      - chunked
      Via:
      - 1.1 google
      access-control-expose-headers:
      - X-Debug-Trace-ID
      cache-control:
      - no-cache, no-store, no-transform, must-revalidate, private, max-age=0
      content-type:
      - text/event-stream
      date:
      - Thu, 28 Nov 2024 16:29:39 GMT
      expires:
      - Thu, 01 Jan 1970 00:00:00 UTC
      pragma:
      - no-cache
      server:
      - envoy
      vary:
      - Origin
      x-accel-expires:
      - '0'
      x-debug-trace-id:
      - d7db1e0543d49520b92e55afb45f0f0d
      x-endpoint-monthly-call-limit:
      - '1000'
      x-envoy-upstream-service-time:
      - '17'
      x-trial-endpoint-call-limit:
      - '40'
      x-trial-endpoint-call-remaining:
      - '37'
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "command-r-plus-08-2024", "messages": [{"role": "system", "content":
      "## Task And Context\nYou use your advanced complex reasoning capabilities to
      help people by answering their questions and other requests interactively. You
      will be asked a very wide array of requests on all kinds of topics. You will
      be equipped with a wide range of search engines or similar tools to help you,
      which you use to research your answer. You may need to use multiple tools in
      parallel or sequentially to complete your task. You should focus on serving
      the user''s needs as best you can, which will be wide-ranging. The current date
      is Thursday, November 28, 2024 16:29:31\n\n## Style Guide\nUnless the user asks
      for a different style of answer, you should answer in full sentences, using
      proper grammar and spelling\n"}, {"role": "user", "content": "The user uploaded
      the following attachments:\nFilename: tests/integration_tests/csv_agent/csv/movie_ratings.csv\nWord
      Count: 21\nPreview: movie,user,rating The Shawshank Redemption,John,8 The Shawshank
      Redemption,Jerry,6 The Shawshank Redemption,Jack,7 The Shawshank Redemption,Jeremy,8
      The user uploaded the following attachments:\nFilename: tests/integration_tests/csv_agent/csv/movie_bookings.csv\nWord
      Count: 21\nPreview: movie,name,num_tickets The Shawshank Redemption,John,2 The
      Shawshank Redemption,Jerry,2 The Shawshank Redemption,Jack,4 The Shawshank Redemption,Jeremy,2"},
      {"role": "user", "content": "who bought the most number of tickets to finding
      nemo?"}], "tools": [{"type": "function", "function": {"name": "file_read", "description":
      "Returns the textual contents of an uploaded file, broken up in text chunks",
      "parameters": {"type": "object", "properties": {"filename": {"type": "str",
      "description": "The name of the attached file to read."}}, "required": ["filename"]}}},
      {"type": "function", "function": {"name": "file_peek", "description": "The name
      of the attached file to show a peek preview.", "parameters": {"type": "object",
      "properties": {"filename": {"type": "str", "description": "The name of the attached
      file to show a peek preview."}}, "required": ["filename"]}}}, {"type": "function",
      "function": {"name": "python_interpreter", "description": "Executes python code
      and returns the result. The code runs in a static sandbox without interactive
      mode, so print output or save output to a file.", "parameters": {"type": "object",
      "properties": {"code": {"type": "str", "description": "Python code to execute."}},
      "required": ["code"]}}}], "stream": true}'
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate
      connection:
      - keep-alive
      content-length:
      - '2526'
      content-type:
      - application/json
      host:
      - api.cohere.com
      user-agent:
      - python-httpx/0.27.2
      x-client-name:
      - langchain:partner
      x-fern-language:
      - Python
      x-fern-sdk-name:
      - cohere
      x-fern-sdk-version:
      - 5.11.4
    method: POST
    uri: https://api.cohere.com/v2/chat
  response:
    body:
      string: 'event: message-start

        data: {"id":"63a8141f-34b1-4c06-ab56-f1aaae76e714","type":"message-start","delta":{"message":{"role":"assistant","content":[],"tool_plan":"","tool_calls":[],"citations":[]}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"I"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" will"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" preview"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" the"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" files"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" to"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" understand"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" their"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" structure"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" and"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" content"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"."}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" Then"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":","}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" I"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" will"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" write"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" and"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" execute"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" Python"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" code"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" to"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" find"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" the"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" person"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" who"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" bought"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" the"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" most"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" number"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" of"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" tickets"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" to"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" Finding"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" Nemo"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"."}}}


        event: tool-call-start

        data: {"type":"tool-call-start","index":0,"delta":{"message":{"tool_calls":{"id":"file_peek_zmqwq6xt7rps","type":"function","function":{"name":"file_peek","arguments":""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"{\n    \""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"filename"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\":"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        \""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"tests"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"integration"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"tests"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"agent"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"ratings"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"."}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"}"}}}}}


        event: tool-call-end

        data: {"type":"tool-call-end","index":0}


        event: tool-call-start

        data: {"type":"tool-call-start","index":1,"delta":{"message":{"tool_calls":{"id":"file_peek_sash9yk7v4py","type":"function","function":{"name":"file_peek","arguments":""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"{\n    \""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"filename"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"\":"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        \""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"tests"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"integration"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"tests"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"agent"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"book"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"ings"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"."}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":1,"delta":{"message":{"tool_calls":{"function":{"arguments":"}"}}}}}


        event: tool-call-end

        data: {"type":"tool-call-end","index":1}


        event: message-end

        data: {"type":"message-end","delta":{"finish_reason":"TOOL_CALL","usage":{"billed_units":{"input_tokens":419,"output_tokens":85},"tokens":{"input_tokens":1224,"output_tokens":140}}}}


        data: [DONE]


        '
    headers:
      Alt-Svc:
      - h3=":443"; ma=2592000,h3-29=":443"; ma=2592000
      Transfer-Encoding:
      - chunked
      Via:
      - 1.1 google
      access-control-expose-headers:
      - X-Debug-Trace-ID
      cache-control:
      - no-cache, no-store, no-transform, must-revalidate, private, max-age=0
      content-type:
      - text/event-stream
      date:
      - Thu, 28 Nov 2024 16:29:40 GMT
      expires:
      - Thu, 01 Jan 1970 00:00:00 UTC
      pragma:
      - no-cache
      server:
      - envoy
      vary:
      - Origin
      x-accel-expires:
      - '0'
      x-debug-trace-id:
      - 3f035c80cfad848e4071b5c1030fbe0e
      x-endpoint-monthly-call-limit:
      - '1000'
      x-envoy-upstream-service-time:
      - '51'
      x-trial-endpoint-call-limit:
      - '40'
      x-trial-endpoint-call-remaining:
      - '36'
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "command-r-plus-08-2024", "messages": [{"role": "system", "content":
      "## Task And Context\nYou use your advanced complex reasoning capabilities to
      help people by answering their questions and other requests interactively. You
      will be asked a very wide array of requests on all kinds of topics. You will
      be equipped with a wide range of search engines or similar tools to help you,
      which you use to research your answer. You may need to use multiple tools in
      parallel or sequentially to complete your task. You should focus on serving
      the user''s needs as best you can, which will be wide-ranging. The current date
      is Thursday, November 28, 2024 16:29:31\n\n## Style Guide\nUnless the user asks
      for a different style of answer, you should answer in full sentences, using
      proper grammar and spelling\n"}, {"role": "user", "content": "The user uploaded
      the following attachments:\nFilename: tests/integration_tests/csv_agent/csv/movie_ratings.csv\nWord
      Count: 21\nPreview: movie,user,rating The Shawshank Redemption,John,8 The Shawshank
      Redemption,Jerry,6 The Shawshank Redemption,Jack,7 The Shawshank Redemption,Jeremy,8
      The user uploaded the following attachments:\nFilename: tests/integration_tests/csv_agent/csv/movie_bookings.csv\nWord
      Count: 21\nPreview: movie,name,num_tickets The Shawshank Redemption,John,2 The
      Shawshank Redemption,Jerry,2 The Shawshank Redemption,Jack,4 The Shawshank Redemption,Jeremy,2"},
      {"role": "user", "content": "who bought the most number of tickets to finding
      nemo?"}, {"role": "assistant", "tool_calls": [{"id": "file_peek_zmqwq6xt7rps",
      "type": "function", "function": {"name": "file_peek", "arguments": "{\"filename\":
      \"tests/integration_tests/csv_agent/csv/movie_ratings.csv\"}"}}, {"id": "file_peek_sash9yk7v4py",
      "type": "function", "function": {"name": "file_peek", "arguments": "{\"filename\":
      \"tests/integration_tests/csv_agent/csv/movie_bookings.csv\"}"}}], "tool_plan":
      "I will preview the files to understand their structure and content. Then, I
      will write and execute Python code to find the person who bought the most number
      of tickets to Finding Nemo."}, {"role": "tool", "tool_call_id": "file_peek_zmqwq6xt7rps",
      "content": [{"type": "document", "document": {"data": {"output": "|    | movie                    |
      user   |   rating |\n|---:|:-------------------------|:-------|---------:|\n|  0
      | The Shawshank Redemption | John   |        8 |\n|  1 | The Shawshank Redemption
      | Jerry  |        6 |\n|  2 | The Shawshank Redemption | Jack   |        7 |\n|  3
      | The Shawshank Redemption | Jeremy |        8 |\n|  4 | Finding Nemo             |
      Darren |        9 |"}}}]}, {"role": "tool", "tool_call_id": "file_peek_sash9yk7v4py",
      "content": [{"type": "document", "document": {"data": {"output": "|    | movie                    |
      name   |   num_tickets |\n|---:|:-------------------------|:-------|--------------:|\n|  0
      | The Shawshank Redemption | John   |             2 |\n|  1 | The Shawshank
      Redemption | Jerry  |             2 |\n|  2 | The Shawshank Redemption | Jack   |             4
      |\n|  3 | The Shawshank Redemption | Jeremy |             2 |\n|  4 | Finding
      Nemo             | Darren |             3 |"}}}]}], "tools": [{"type": "function",
      "function": {"name": "file_read", "description": "Returns the textual contents
      of an uploaded file, broken up in text chunks", "parameters": {"type": "object",
      "properties": {"filename": {"type": "str", "description": "The name of the attached
      file to read."}}, "required": ["filename"]}}}, {"type": "function", "function":
      {"name": "file_peek", "description": "The name of the attached file to show
      a peek preview.", "parameters": {"type": "object", "properties": {"filename":
      {"type": "str", "description": "The name of the attached file to show a peek
      preview."}}, "required": ["filename"]}}}, {"type": "function", "function": {"name":
      "python_interpreter", "description": "Executes python code and returns the result.
      The code runs in a static sandbox without interactive mode, so print output
      or save output to a file.", "parameters": {"type": "object", "properties": {"code":
      {"type": "str", "description": "Python code to execute."}}, "required": ["code"]}}}],
      "stream": true}'
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate
      connection:
      - keep-alive
      content-length:
      - '4196'
      content-type:
      - application/json
      host:
      - api.cohere.com
      user-agent:
      - python-httpx/0.27.2
      x-client-name:
      - langchain:partner
      x-fern-language:
      - Python
      x-fern-sdk-name:
      - cohere
      x-fern-sdk-version:
      - 5.11.4
    method: POST
    uri: https://api.cohere.com/v2/chat
  response:
    body:
      string: 'event: message-start

        data: {"id":"0d0218d9-ff83-41e2-b309-1426fbff5a74","type":"message-start","delta":{"message":{"role":"assistant","content":[],"tool_plan":"","tool_calls":[],"citations":[]}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"The"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" files"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" contain"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" information"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" about"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" movie"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" ratings"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" and"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" movie"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" bookings"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"."}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" The"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" movie"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"_"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"ratings"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"."}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"csv"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" file"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" contains"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" the"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" columns"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" movie"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":","}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" user"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":","}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" and"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" rating"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"."}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" The"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" movie"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"_"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"book"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"ings"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"."}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"csv"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" file"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" contains"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" the"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" columns"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" movie"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":","}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" name"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":","}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" and"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" num"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"_"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"tickets"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"."}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"\n\nI"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" will"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" now"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" write"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" and"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" execute"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" Python"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" code"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" to"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" find"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" the"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" person"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" who"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" bought"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" the"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" most"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" number"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" of"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" tickets"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" to"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" Finding"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":" Nemo"}}}


        event: tool-plan-delta

        data: {"type":"tool-plan-delta","delta":{"message":{"tool_plan":"."}}}


        event: tool-call-start

        data: {"type":"tool-call-start","index":0,"delta":{"message":{"tool_calls":{"id":"python_interpreter_763j04yaqafd","type":"function","function":{"name":"python_interpreter","arguments":""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"{\n    \""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"code"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\":"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        \""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"import"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        pandas"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        as"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        pd"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"#"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        Read"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        the"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        data"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"ratings"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        ="}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        pd"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"."}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"read"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"(\\\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"tests"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"integration"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"tests"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"agent"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"ratings"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"."}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\\")"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"book"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"ings"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        ="}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        pd"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"."}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"read"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"(\\\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"tests"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"integration"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"tests"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"agent"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"/"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"book"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"ings"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"."}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"csv"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\\")"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"#"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        Merge"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        the"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        data"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"frames"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"merged"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"data"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        ="}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        pd"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"."}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"merge"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"("}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"ratings"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":","}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"book"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"ings"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":","}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        on"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"=\\\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\\")"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"#"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        Filter"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        the"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        data"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        for"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        Finding"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        Nemo"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"filtered"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"data"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        ="}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        merged"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"data"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"["}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"merged"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"data"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"["}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"movie"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\\"]"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        =="}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        \\\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"Finding"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        Nemo"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\\"]"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"#"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        Find"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        the"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        person"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        who"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        bought"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        the"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        most"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        number"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        of"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        tickets"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"most"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"tickets"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"person"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        ="}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        filtered"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"data"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"."}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"groupby"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"(\\\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"name"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\\")["}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"num"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"tickets"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"]."}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"sum"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"()."}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"idx"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"max"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"()"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"print"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"("}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"f"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\\\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"The"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        person"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        who"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        bought"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        the"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        most"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        number"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        of"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        tickets"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        to"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        Finding"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        Nemo"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        is"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"
        {"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"most"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"tickets"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"_"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"person"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"}\\\")"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\""}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"\n"}}}}}


        event: tool-call-delta

        data: {"type":"tool-call-delta","index":0,"delta":{"message":{"tool_calls":{"function":{"arguments":"}"}}}}}


        event: tool-call-end

        data: {"type":"tool-call-end","index":0}


        event: message-end

        data: {"type":"message-end","delta":{"finish_reason":"TOOL_CALL","usage":{"billed_units":{"input_tokens":675,"output_tokens":291},"tokens":{"input_tokens":1610,"output_tokens":325}}}}


        data: [DONE]


        '
    headers:
      Alt-Svc:
      - h3=":443"; ma=2592000,h3-29=":443"; ma=2592000
      Transfer-Encoding:
      - chunked
      Via:
      - 1.1 google
      access-control-expose-headers:
      - X-Debug-Trace-ID
      cache-control:
      - no-cache, no-store, no-transform, must-revalidate, private, max-age=0
      content-type:
      - text/event-stream
      date:
      - Thu, 28 Nov 2024 16:29:44 GMT
      expires:
      - Thu, 01 Jan 1970 00:00:00 UTC
      pragma:
      - no-cache
      server:
      - envoy
      vary:
      - Origin
      x-accel-expires:
      - '0'
      x-debug-trace-id:
      - e438023b030ffd59be87588698af9417
      x-endpoint-monthly-call-limit:
      - '1000'
      x-envoy-upstream-service-time:
      - '20'
      x-trial-endpoint-call-limit:
      - '40'
      x-trial-endpoint-call-remaining:
      - '35'
    status:
      code: 200
      message: OK
- request:
    body: '{"model": "command-r-plus-08-2024", "messages": [{"role": "system", "content":
      "## Task And Context\nYou use your advanced complex reasoning capabilities to
      help people by answering their questions and other requests interactively. You
      will be asked a very wide array of requests on all kinds of topics. You will
      be equipped with a wide range of search engines or similar tools to help you,
      which you use to research your answer. You may need to use multiple tools in
      parallel or sequentially to complete your task. You should focus on serving
      the user''s needs as best you can, which will be wide-ranging. The current date
      is Thursday, November 28, 2024 16:29:31\n\n## Style Guide\nUnless the user asks
      for a different style of answer, you should answer in full sentences, using
      proper grammar and spelling\n"}, {"role": "user", "content": "The user uploaded
      the following attachments:\nFilename: tests/integration_tests/csv_agent/csv/movie_ratings.csv\nWord
      Count: 21\nPreview: movie,user,rating The Shawshank Redemption,John,8 The Shawshank
      Redemption,Jerry,6 The Shawshank Redemption,Jack,7 The Shawshank Redemption,Jeremy,8
      The user uploaded the following attachments:\nFilename: tests/integration_tests/csv_agent/csv/movie_bookings.csv\nWord
      Count: 21\nPreview: movie,name,num_tickets The Shawshank Redemption,John,2 The
      Shawshank Redemption,Jerry,2 The Shawshank Redemption,Jack,4 The Shawshank Redemption,Jeremy,2"},
      {"role": "user", "content": "who bought the most number of tickets to finding
      nemo?"}, {"role": "assistant", "tool_calls": [{"id": "file_peek_zmqwq6xt7rps",
      "type": "function", "function": {"name": "file_peek", "arguments": "{\"filename\":
      \"tests/integration_tests/csv_agent/csv/movie_ratings.csv\"}"}}, {"id": "file_peek_sash9yk7v4py",
      "type": "function", "function": {"name": "file_peek", "arguments": "{\"filename\":
      \"tests/integration_tests/csv_agent/csv/movie_bookings.csv\"}"}}], "tool_plan":
      "I will preview the files to understand their structure and content. Then, I
      will write and execute Python code to find the person who bought the most number
      of tickets to Finding Nemo."}, {"role": "tool", "tool_call_id": "file_peek_zmqwq6xt7rps",
      "content": [{"type": "document", "document": {"data": {"output": "|    | movie                    |
      user   |   rating |\n|---:|:-------------------------|:-------|---------:|\n|  0
      | The Shawshank Redemption | John   |        8 |\n|  1 | The Shawshank Redemption
      | Jerry  |        6 |\n|  2 | The Shawshank Redemption | Jack   |        7 |\n|  3
      | The Shawshank Redemption | Jeremy |        8 |\n|  4 | Finding Nemo             |
      Darren |        9 |"}}}]}, {"role": "tool", "tool_call_id": "file_peek_sash9yk7v4py",
      "content": [{"type": "document", "document": {"data": {"output": "|    | movie                    |
      name   |   num_tickets |\n|---:|:-------------------------|:-------|--------------:|\n|  0
      | The Shawshank Redemption | John   |             2 |\n|  1 | The Shawshank
      Redemption | Jerry  |             2 |\n|  2 | The Shawshank Redemption | Jack   |             4
      |\n|  3 | The Shawshank Redemption | Jeremy |             2 |\n|  4 | Finding
      Nemo             | Darren |             3 |"}}}]}, {"role": "assistant", "tool_calls":
      [{"id": "python_interpreter_763j04yaqafd", "type": "function", "function": {"name":
      "python_interpreter", "arguments": "{\"code\": \"import pandas as pd\\n\\n#
      Read the data\\nmovie_ratings = pd.read_csv(\\\"tests/integration_tests/csv_agent/csv/movie_ratings.csv\\\")\\nmovie_bookings
      = pd.read_csv(\\\"tests/integration_tests/csv_agent/csv/movie_bookings.csv\\\")\\n\\n#
      Merge the dataframes\\nmerged_data = pd.merge(movie_ratings, movie_bookings,
      on=\\\"movie\\\")\\n\\n# Filter the data for Finding Nemo\\nfiltered_data =
      merged_data[merged_data[\\\"movie\\\"] == \\\"Finding Nemo\\\"]\\n\\n# Find
      the person who bought the most number of tickets\\nmost_tickets_person = filtered_data.groupby(\\\"name\\\")[\\\"num_tickets\\\"].sum().idxmax()\\n\\nprint(f\\\"The
      person who bought the most number of tickets to Finding Nemo is {most_tickets_person}\\\")\"}"}}],
      "tool_plan": "The files contain information about movie ratings and movie bookings.
      The movie_ratings.csv file contains the columns movie, user, and rating. The
      movie_bookings.csv file contains the columns movie, name, and num_tickets.\n\nI
      will now write and execute Python code to find the person who bought the most
      number of tickets to Finding Nemo."}, {"role": "tool", "tool_call_id": "python_interpreter_763j04yaqafd",
      "content": [{"type": "document", "document": {"data": {"output": "The person
      who bought the most number of tickets to Finding Nemo is Penelope\n"}}}]}],
      "tools": [{"type": "function", "function": {"name": "file_read", "description":
      "Returns the textual contents of an uploaded file, broken up in text chunks",
      "parameters": {"type": "object", "properties": {"filename": {"type": "str",
      "description": "The name of the attached file to read."}}, "required": ["filename"]}}},
      {"type": "function", "function": {"name": "file_peek", "description": "The name
      of the attached file to show a peek preview.", "parameters": {"type": "object",
      "properties": {"filename": {"type": "str", "description": "The name of the attached
      file to show a peek preview."}}, "required": ["filename"]}}}, {"type": "function",
      "function": {"name": "python_interpreter", "description": "Executes python code
      and returns the result. The code runs in a static sandbox without interactive
      mode, so print output or save output to a file.", "parameters": {"type": "object",
      "properties": {"code": {"type": "str", "description": "Python code to execute."}},
      "required": ["code"]}}}], "stream": true}'
    headers:
      accept:
      - '*/*'
      accept-encoding:
      - gzip, deflate
      connection:
      - keep-alive
      content-length:
      - '5675'
      content-type:
      - application/json
      host:
      - api.cohere.com
      user-agent:
      - python-httpx/0.27.2
      x-client-name:
      - langchain:partner
      x-fern-language:
      - Python
      x-fern-sdk-name:
      - cohere
      x-fern-sdk-version:
      - 5.11.4
    method: POST
    uri: https://api.cohere.com/v2/chat
  response:
    body:
      string: 'event: message-start

        data: {"id":"6ea117a6-2813-456f-876b-94d50459e170","type":"message-start","delta":{"message":{"role":"assistant","content":[],"tool_plan":"","tool_calls":[],"citations":[]}}}


        event: content-start

        data: {"type":"content-start","index":0,"delta":{"message":{"content":{"type":"text","text":""}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"The"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        person"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        who"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        bought"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        the"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        most"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        number"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        of"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        tickets"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        to"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        Finding"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        Nemo"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        is"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"
        Penelope"}}}}


        event: content-delta

        data: {"type":"content-delta","index":0,"delta":{"message":{"content":{"text":"."}}}}


        event: citation-start

        data: {"type":"citation-start","index":0,"delta":{"message":{"citations":{"start":68,"end":77,"text":"Penelope.","sources":[{"type":"tool","id":"python_interpreter_763j04yaqafd:0","tool_output":{"output":"The
        person who bought the most number of tickets to Finding Nemo is Penelope\n"}}]}}}}


        event: citation-end

        data: {"type":"citation-end","index":0}


        event: content-end

        data: {"type":"content-end","index":0}


        event: message-end

        data: {"type":"message-end","delta":{"finish_reason":"COMPLETE","usage":{"billed_units":{"input_tokens":774,"output_tokens":15},"tokens":{"input_tokens":1979,"output_tokens":67}}}}


        data: [DONE]


        '
    headers:
      Alt-Svc:
      - h3=":443"; ma=2592000,h3-29=":443"; ma=2592000
      Transfer-Encoding:
      - chunked
      Via:
      - 1.1 google
      access-control-expose-headers:
      - X-Debug-Trace-ID
      cache-control:
      - no-cache, no-store, no-transform, must-revalidate, private, max-age=0
      content-type:
      - text/event-stream
      date:
      - Thu, 28 Nov 2024 16:29:51 GMT
      expires:
      - Thu, 01 Jan 1970 00:00:00 UTC
      pragma:
      - no-cache
      server:
      - envoy
      vary:
      - Origin
      x-accel-expires:
      - '0'
      x-debug-trace-id:
      - 2a42cfd6201c5c887114631c1482601b
      x-endpoint-monthly-call-limit:
      - '1000'
      x-envoy-upstream-service-time:
      - '30'
      x-trial-endpoint-call-limit:
      - '40'
      x-trial-endpoint-call-remaining:
      - '34'
    status:
      code: 200
      message: OK
version: 1
